import{z as R,r as yt,K as lt,aS as Ut,L as Jt,d as Kt,f as ht,o as ct,i as St,n as At,g as Xt,T as j,k as Yt,j as te}from"./modules/vue-BGP6N4VS.js";import{J as Wt,a as ee,ay as se,Y as ne,X as oe}from"./index-B3VkfYa6.js";const ae=["center","top","bottom","left","right","topleft","topright","bottomleft","bottomright"],re=new Set(ae),B={value:0,unit:"px"},ie=/(?<value>[+-]?\d+)(?<unit>%|px)?/,le=/^\(\s*(?<x>\S+)\s*,\s*(?<y>\S+)\s*\)$/,he=/^(?<query>[^@]+?)(@\s*(?<snapPosition>.+?))?$/;function st(o){const t=o.match(ie);if(!t)return;const s=parseInt(t.groups?.value??"0",10),e=t.groups?.unit??"px";return{value:s,unit:e}}function Nt(o){const t=o.match(le);if(!t)return;const s=st(t.groups?.x??"")??B,e=st(t.groups?.y??"")??B;return{x:s,y:e}}function mt(o){return re.has(o)?o:Nt(o)}function ce(o){o=o.trim();const t=Nt(o);if(t)return t;const s=o.match(he);if(s){const e=s.groups?.query;if(!e)throw new Error(`Invalid arrow endpoint format: missing query group in "${o}"`);const n=s.groups?.snapPosition;return{query:e.trim(),snapPosition:n?mt(n):void 0}}throw new Error(`Invalid arrow endpoint format: ${o}`)}function Ot(o){if(o.shorthand)try{return ce(o.shorthand)}catch(t){console.error(`Failed to parse shorthand "${o.shorthand}":`,t);return}if(o.q)return{query:o.q,snapPosition:o.pos?mt(o.pos):void 0};if(o.id)return{query:`#${o.id}`,snapPosition:o.pos?mt(o.pos):void 0};if(o.x!=null||o.y!=null)return{x:typeof o.x=="number"?{value:o.x,unit:"px"}:typeof o.x=="string"?st(o.x)??B:B,y:typeof o.y=="number"?{value:o.y,unit:"px"}:typeof o.y=="string"?st(o.y)??B:B}}function J(o,t){return o.unit==="px"?o.value:o.unit==="%"?o.value/100*t:(console.warn(`Unknown length percentage unit: ${o.unit}`),0)}function Lt(o,t,s,e){const{$scale:n}=Wt(),{isPrintMode:a}=ee(),i=se(),r=R(()=>{if(!a.value&&!i.value)return;const h=s.value;if(h==null){const u=e.self.value;return u?{element:e.direction==="next"?u.nextElementSibling:u.previousElementSibling,snapPosition:void 0}:void 0}if(!("query"in h))return;const p=o.value?.querySelector(h.query)??null;return p==null&&console.warn(`Element not found for query: ${h.query}`),{element:p,snapPosition:h.snapPosition}}),l=yt(void 0);lt(s,h=>{if(h==null){l.value=void 0;return}else if("x"in h){l.value={x:J(h.x,oe.value),y:J(h.y,ne.value)};return}},{immediate:!0});const c=()=>{if(!r.value)return;const{element:h,snapPosition:p}=r.value;if(!t.value||!h){l.value=void 0;return}const u=h.getBoundingClientRect(),f=t.value.getBoundingClientRect();let d=(u.left-f.left)/n.value,g=(u.top-f.top)/n.value;const y=u.width/n.value,m=u.height/n.value;typeof p=="string"||p==null?(p?.includes("right")?d+=y:p?.includes("left")||(d+=y/2),p?.includes("bottom")?g+=m:p?.includes("top")||(g+=m/2)):typeof p=="object"&&(d+=J(p.x,y),g+=J(p.y,m)),(l.value?.x!==d||l.value?.y!==g)&&(l.value={x:d,y:g})};return lt(i,()=>{setTimeout(()=>{c()})}),lt(r,h=>{if(h?.element){const p=new MutationObserver(c);p.observe(h.element,{attributes:!0}),Ut(()=>{p.disconnect()})}},{immediate:!0}),Jt(()=>{c();const h=setInterval(()=>{c()},100);return()=>clearInterval(h)}),l}function ut(o,t,s){if(o&&o.length){const[e,n]=t,a=Math.PI/180*s,i=Math.cos(a),r=Math.sin(a);for(const l of o){const[c,h]=l;l[0]=(c-e)*i-(h-n)*r+e,l[1]=(c-e)*r+(h-n)*i+n}}}function ue(o,t){return o[0]===t[0]&&o[1]===t[1]}function fe(o,t,s,e=1){const n=s,a=Math.max(t,.1),i=o[0]&&o[0][0]&&typeof o[0][0]=="number"?[o]:o,r=[0,0];if(n)for(const c of i)ut(c,r,n);const l=(function(c,h,p){const u=[];for(const M of c){const b=[...M];ue(b[0],b[b.length-1])||b.push([b[0][0],b[0][1]]),b.length>2&&u.push(b)}const f=[];h=Math.max(h,.1);const d=[];for(const M of u)for(let b=0;b<M.length-1;b++){const k=M[b],x=M[b+1];if(k[1]!==x[1]){const w=Math.min(k[1],x[1]);d.push({ymin:w,ymax:Math.max(k[1],x[1]),x:w===k[1]?k[0]:x[0],islope:(x[0]-k[0])/(x[1]-k[1])})}}if(d.sort(((M,b)=>M.ymin<b.ymin?-1:M.ymin>b.ymin?1:M.x<b.x?-1:M.x>b.x?1:M.ymax===b.ymax?0:(M.ymax-b.ymax)/Math.abs(M.ymax-b.ymax))),!d.length)return f;let g=[],y=d[0].ymin,m=0;for(;g.length||d.length;){if(d.length){let M=-1;for(let b=0;b<d.length&&!(d[b].ymin>y);b++)M=b;d.splice(0,M+1).forEach((b=>{g.push({s:y,edge:b})}))}if(g=g.filter((M=>!(M.edge.ymax<=y))),g.sort(((M,b)=>M.edge.x===b.edge.x?0:(M.edge.x-b.edge.x)/Math.abs(M.edge.x-b.edge.x))),(p!==1||m%h==0)&&g.length>1)for(let M=0;M<g.length;M+=2){const b=M+1;if(b>=g.length)break;const k=g[M].edge,x=g[b].edge;f.push([[Math.round(k.x),y],[Math.round(x.x),y]])}y+=p,g.forEach((M=>{M.edge.x=M.edge.x+p*M.edge.islope})),m++}return f})(i,a,e);if(n){for(const c of i)ut(c,r,-n);(function(c,h,p){const u=[];c.forEach((f=>u.push(...f))),ut(u,h,p)})(l,r,-n)}return l}function Q(o,t){var s;const e=t.hachureAngle+90;let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.round(Math.max(n,.1));let a=1;return t.roughness>=1&&(((s=t.randomizer)===null||s===void 0?void 0:s.next())||Math.random())>.7&&(a=n),fe(o,n,e,a||1)}class bt{constructor(t){this.helper=t}fillPolygons(t,s){return this._fillPolygons(t,s)}_fillPolygons(t,s){const e=Q(t,s);return{type:"fillSketch",ops:this.renderLines(e,s)}}renderLines(t,s){const e=[];for(const n of t)e.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],s));return e}}function it(o){const t=o[0],s=o[1];return Math.sqrt(Math.pow(t[0]-s[0],2)+Math.pow(t[1]-s[1],2))}class pe extends bt{fillPolygons(t,s){let e=s.hachureGap;e<0&&(e=4*s.strokeWidth),e=Math.max(e,.1);const n=Q(t,Object.assign({},s,{hachureGap:e})),a=Math.PI/180*s.hachureAngle,i=[],r=.5*e*Math.cos(a),l=.5*e*Math.sin(a);for(const[c,h]of n)it([c,h])&&i.push([[c[0]-r,c[1]+l],[...h]],[[c[0]+r,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(i,s)}}}class de extends bt{fillPolygons(t,s){const e=this._fillPolygons(t,s),n=Object.assign({},s,{hachureAngle:s.hachureAngle+90}),a=this._fillPolygons(t,n);return e.ops=e.ops.concat(a.ops),e}}class ge{constructor(t){this.helper=t}fillPolygons(t,s){const e=Q(t,s=Object.assign({},s,{hachureAngle:0}));return this.dotsOnLines(e,s)}dotsOnLines(t,s){const e=[];let n=s.hachureGap;n<0&&(n=4*s.strokeWidth),n=Math.max(n,.1);let a=s.fillWeight;a<0&&(a=s.strokeWidth/2);const i=n/4;for(const r of t){const l=it(r),c=l/n,h=Math.ceil(c)-1,p=l-h*n,u=(r[0][0]+r[1][0])/2-n/4,f=Math.min(r[0][1],r[1][1]);for(let d=0;d<h;d++){const g=f+p+d*n,y=u-i+2*Math.random()*i,m=g-i+2*Math.random()*i,M=this.helper.ellipse(y,m,a,a,s);e.push(...M.ops)}}return{type:"fillSketch",ops:e}}}class ye{constructor(t){this.helper=t}fillPolygons(t,s){const e=Q(t,s);return{type:"fillSketch",ops:this.dashedLine(e,s)}}dashedLine(t,s){const e=s.dashOffset<0?s.hachureGap<0?4*s.strokeWidth:s.hachureGap:s.dashOffset,n=s.dashGap<0?s.hachureGap<0?4*s.strokeWidth:s.hachureGap:s.dashGap,a=[];return t.forEach((i=>{const r=it(i),l=Math.floor(r/(e+n)),c=(r+n-l*(e+n))/2;let h=i[0],p=i[1];h[0]>p[0]&&(h=i[1],p=i[0]);const u=Math.atan((p[1]-h[1])/(p[0]-h[0]));for(let f=0;f<l;f++){const d=f*(e+n),g=d+e,y=[h[0]+d*Math.cos(u)+c*Math.cos(u),h[1]+d*Math.sin(u)+c*Math.sin(u)],m=[h[0]+g*Math.cos(u)+c*Math.cos(u),h[1]+g*Math.sin(u)+c*Math.sin(u)];a.push(...this.helper.doubleLineOps(y[0],y[1],m[0],m[1],s))}})),a}}class me{constructor(t){this.helper=t}fillPolygons(t,s){const e=s.hachureGap<0?4*s.strokeWidth:s.hachureGap,n=s.zigzagOffset<0?e:s.zigzagOffset,a=Q(t,s=Object.assign({},s,{hachureGap:e+n}));return{type:"fillSketch",ops:this.zigzagLines(a,n,s)}}zigzagLines(t,s,e){const n=[];return t.forEach((a=>{const i=it(a),r=Math.round(i/(2*s));let l=a[0],c=a[1];l[0]>c[0]&&(l=a[1],c=a[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let p=0;p<r;p++){const u=2*p*s,f=2*(p+1)*s,d=Math.sqrt(2*Math.pow(s,2)),g=[l[0]+u*Math.cos(h),l[1]+u*Math.sin(h)],y=[l[0]+f*Math.cos(h),l[1]+f*Math.sin(h)],m=[g[0]+d*Math.cos(h+Math.PI/4),g[1]+d*Math.sin(h+Math.PI/4)];n.push(...this.helper.doubleLineOps(g[0],g[1],m[0],m[1],e),...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],e))}})),n}}const _={};class Me{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const ve=0,ft=1,Dt=2,K={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function pt(o,t){return o.type===t}function xt(o){const t=[],s=(function(i){const r=new Array;for(;i!=="";)if(i.match(/^([ \t\r\n,]+)/))i=i.substr(RegExp.$1.length);else if(i.match(/^([aAcChHlLmMqQsStTvVzZ])/))r[r.length]={type:ve,text:RegExp.$1},i=i.substr(RegExp.$1.length);else{if(!i.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];r[r.length]={type:ft,text:`${parseFloat(RegExp.$1)}`},i=i.substr(RegExp.$1.length)}return r[r.length]={type:Dt,text:""},r})(o);let e="BOD",n=0,a=s[n];for(;!pt(a,Dt);){let i=0;const r=[];if(e==="BOD"){if(a.text!=="M"&&a.text!=="m")return xt("M0,0"+o);n++,i=K[a.text],e=a.text}else pt(a,ft)?i=K[e]:(n++,i=K[a.text],e=a.text);if(!(n+i<s.length))throw new Error("Path data ended short");for(let l=n;l<n+i;l++){const c=s[l];if(!pt(c,ft))throw new Error("Param not a number: "+e+","+c.text);r[r.length]=+c.text}if(typeof K[e]!="number")throw new Error("Bad segment: "+e);{const l={key:e,data:r};t.push(l),n+=i,a=s[n],e==="M"&&(e="L"),e==="m"&&(e="l")}}return t}function Rt(o){let t=0,s=0,e=0,n=0;const a=[];for(const{key:i,data:r}of o)switch(i){case"M":a.push({key:"M",data:[...r]}),[t,s]=r,[e,n]=r;break;case"m":t+=r[0],s+=r[1],a.push({key:"M",data:[t,s]}),e=t,n=s;break;case"L":a.push({key:"L",data:[...r]}),[t,s]=r;break;case"l":t+=r[0],s+=r[1],a.push({key:"L",data:[t,s]});break;case"C":a.push({key:"C",data:[...r]}),t=r[4],s=r[5];break;case"c":{const l=r.map(((c,h)=>h%2?c+s:c+t));a.push({key:"C",data:l}),t=l[4],s=l[5];break}case"Q":a.push({key:"Q",data:[...r]}),t=r[2],s=r[3];break;case"q":{const l=r.map(((c,h)=>h%2?c+s:c+t));a.push({key:"Q",data:l}),t=l[2],s=l[3];break}case"A":a.push({key:"A",data:[...r]}),t=r[5],s=r[6];break;case"a":t+=r[5],s+=r[6],a.push({key:"A",data:[r[0],r[1],r[2],r[3],r[4],t,s]});break;case"H":a.push({key:"H",data:[...r]}),t=r[0];break;case"h":t+=r[0],a.push({key:"H",data:[t]});break;case"V":a.push({key:"V",data:[...r]}),s=r[0];break;case"v":s+=r[0],a.push({key:"V",data:[s]});break;case"S":a.push({key:"S",data:[...r]}),t=r[2],s=r[3];break;case"s":{const l=r.map(((c,h)=>h%2?c+s:c+t));a.push({key:"S",data:l}),t=l[2],s=l[3];break}case"T":a.push({key:"T",data:[...r]}),t=r[0],s=r[1];break;case"t":t+=r[0],s+=r[1],a.push({key:"T",data:[t,s]});break;case"Z":case"z":a.push({key:"Z",data:[]}),t=e,s=n}return a}function Ht(o){const t=[];let s="",e=0,n=0,a=0,i=0,r=0,l=0;for(const{key:c,data:h}of o){switch(c){case"M":t.push({key:"M",data:[...h]}),[e,n]=h,[a,i]=h;break;case"C":t.push({key:"C",data:[...h]}),e=h[4],n=h[5],r=h[2],l=h[3];break;case"L":t.push({key:"L",data:[...h]}),[e,n]=h;break;case"H":e=h[0],t.push({key:"L",data:[e,n]});break;case"V":n=h[0],t.push({key:"L",data:[e,n]});break;case"S":{let p=0,u=0;s==="C"||s==="S"?(p=e+(e-r),u=n+(n-l)):(p=e,u=n),t.push({key:"C",data:[p,u,...h]}),r=h[0],l=h[1],e=h[2],n=h[3];break}case"T":{const[p,u]=h;let f=0,d=0;s==="Q"||s==="T"?(f=e+(e-r),d=n+(n-l)):(f=e,d=n);const g=e+2*(f-e)/3,y=n+2*(d-n)/3,m=p+2*(f-p)/3,M=u+2*(d-u)/3;t.push({key:"C",data:[g,y,m,M,p,u]}),r=f,l=d,e=p,n=u;break}case"Q":{const[p,u,f,d]=h,g=e+2*(p-e)/3,y=n+2*(u-n)/3,m=f+2*(p-f)/3,M=d+2*(u-d)/3;t.push({key:"C",data:[g,y,m,M,f,d]}),r=p,l=u,e=f,n=d;break}case"A":{const p=Math.abs(h[0]),u=Math.abs(h[1]),f=h[2],d=h[3],g=h[4],y=h[5],m=h[6];p===0||u===0?(t.push({key:"C",data:[e,n,y,m,y,m]}),e=y,n=m):(e!==y||n!==m)&&(Gt(e,n,y,m,p,u,f,d,g).forEach((function(M){t.push({key:"C",data:M})})),e=y,n=m);break}case"Z":t.push({key:"Z",data:[]}),e=a,n=i}s=c}return t}function V(o,t,s){return[o*Math.cos(s)-t*Math.sin(s),o*Math.sin(s)+t*Math.cos(s)]}function Gt(o,t,s,e,n,a,i,r,l,c){const h=(p=i,Math.PI*p/180);var p;let u=[],f=0,d=0,g=0,y=0;if(c)[f,d,g,y]=c;else{[o,t]=V(o,t,-h),[s,e]=V(s,e,-h);const D=(o-s)/2,S=(t-e)/2;let P=D*D/(n*n)+S*S/(a*a);P>1&&(P=Math.sqrt(P),n*=P,a*=P);const T=n*n,C=a*a,O=T*C-T*S*S-C*D*D,z=T*S*S+C*D*D,N=(r===l?-1:1)*Math.sqrt(Math.abs(O/z));g=N*n*S/a+(o+s)/2,y=N*-a*D/n+(t+e)/2,f=Math.asin(parseFloat(((t-y)/a).toFixed(9))),d=Math.asin(parseFloat(((e-y)/a).toFixed(9))),o<g&&(f=Math.PI-f),s<g&&(d=Math.PI-d),f<0&&(f=2*Math.PI+f),d<0&&(d=2*Math.PI+d),l&&f>d&&(f-=2*Math.PI),!l&&d>f&&(d-=2*Math.PI)}let m=d-f;if(Math.abs(m)>120*Math.PI/180){const D=d,S=s,P=e;d=l&&d>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,u=Gt(s=g+n*Math.cos(d),e=y+a*Math.sin(d),S,P,n,a,i,0,l,[d,D,g,y])}m=d-f;const M=Math.cos(f),b=Math.sin(f),k=Math.cos(d),x=Math.sin(d),w=Math.tan(m/4),L=4/3*n*w,$=4/3*a*w,q=[o,t],A=[o+L*b,t-$*M],I=[s+L*x,e-$*k],W=[s,e];if(A[0]=2*q[0]-A[0],A[1]=2*q[1]-A[1],c)return[A,I,W].concat(u);{u=[A,I,W].concat(u);const D=[];for(let S=0;S<u.length;S+=3){const P=V(u[S][0],u[S][1],h),T=V(u[S+1][0],u[S+1][1],h),C=V(u[S+2][0],u[S+2][1],h);D.push([P[0],P[1],T[0],T[1],C[0],C[1]])}return D}}const ke={randOffset:function(o,t){return v(o,t)},randOffsetWithRange:function(o,t,s){return nt(o,t,s)},ellipse:function(o,t,s,e,n){const a=Bt(s,e,n);return Mt(o,t,n,a).opset},doubleLineOps:function(o,t,s,e,n){return H(o,t,s,e,n,!0)}};function Ft(o,t,s,e,n){return{type:"path",ops:H(o,t,s,e,n)}}function tt(o,t,s){const e=(o||[]).length;if(e>2){const n=[];for(let a=0;a<e-1;a++)n.push(...H(o[a][0],o[a][1],o[a+1][0],o[a+1][1],s));return t&&n.push(...H(o[e-1][0],o[e-1][1],o[0][0],o[0][1],s)),{type:"path",ops:n}}return e===2?Ft(o[0][0],o[0][1],o[1][0],o[1][1],s):{type:"path",ops:[]}}function be(o,t,s,e,n){return(function(a,i){return tt(a,!0,i)})([[o,t],[o+s,t],[o+s,t+e],[o,t+e]],n)}function Tt(o,t){if(o.length){const s=typeof o[0][0]=="number"?[o]:o,e=X(s[0],1*(1+.2*t.roughness),t),n=t.disableMultiStroke?[]:X(s[0],1.5*(1+.22*t.roughness),It(t));for(let a=1;a<s.length;a++){const i=s[a];if(i.length){const r=X(i,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:X(i,1.5*(1+.22*t.roughness),It(t));for(const c of r)c.op!=="move"&&e.push(c);for(const c of l)c.op!=="move"&&n.push(c)}}return{type:"path",ops:e.concat(n)}}return{type:"path",ops:[]}}function Bt(o,t,s){const e=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(o/2,2)+Math.pow(t/2,2))/2)),n=Math.ceil(Math.max(s.curveStepCount,s.curveStepCount/Math.sqrt(200)*e)),a=2*Math.PI/n;let i=Math.abs(o/2),r=Math.abs(t/2);const l=1-s.curveFitting;return i+=v(i*l,s),r+=v(r*l,s),{increment:a,rx:i,ry:r}}function Mt(o,t,s,e){const[n,a]=_t(e.increment,o,t,e.rx,e.ry,1,e.increment*nt(.1,nt(.4,1,s),s),s);let i=ot(n,null,s);if(!s.disableMultiStroke&&s.roughness!==0){const[r]=_t(e.increment,o,t,e.rx,e.ry,1.5,0,s),l=ot(r,null,s);i=i.concat(l)}return{estimatedPoints:a,opset:{type:"path",ops:i}}}function $t(o,t,s,e,n,a,i,r,l){const c=o,h=t;let p=Math.abs(s/2),u=Math.abs(e/2);p+=v(.01*p,l),u+=v(.01*u,l);let f=n,d=a;for(;f<0;)f+=2*Math.PI,d+=2*Math.PI;d-f>2*Math.PI&&(f=0,d=2*Math.PI);const g=2*Math.PI/l.curveStepCount,y=Math.min(g/2,(d-f)/2),m=Et(y,c,h,p,u,f,d,1,l);if(!l.disableMultiStroke){const M=Et(y,c,h,p,u,f,d,1.5,l);m.push(...M)}return i&&(r?m.push(...H(c,h,c+p*Math.cos(f),h+u*Math.sin(f),l),...H(c,h,c+p*Math.cos(d),h+u*Math.sin(d),l)):m.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+p*Math.cos(f),h+u*Math.sin(f)]})),{type:"path",ops:m}}function Ct(o,t){const s=Ht(Rt(xt(o))),e=[];let n=[0,0],a=[0,0];for(const{key:i,data:r}of s)switch(i){case"M":a=[r[0],r[1]],n=[r[0],r[1]];break;case"L":e.push(...H(a[0],a[1],r[0],r[1],t)),a=[r[0],r[1]];break;case"C":{const[l,c,h,p,u,f]=r;e.push(...xe(l,c,h,p,u,f,a,t)),a=[u,f];break}case"Z":e.push(...H(a[0],a[1],n[0],n[1],t)),a=[n[0],n[1]]}return{type:"path",ops:e}}function dt(o,t){const s=[];for(const e of o)if(e.length){const n=t.maxRandomnessOffset||0,a=e.length;if(a>2){s.push({op:"move",data:[e[0][0]+v(n,t),e[0][1]+v(n,t)]});for(let i=1;i<a;i++)s.push({op:"lineTo",data:[e[i][0]+v(n,t),e[i][1]+v(n,t)]})}}return{type:"fillPath",ops:s}}function F(o,t){return(function(s,e){let n=s.fillStyle||"hachure";if(!_[n])switch(n){case"zigzag":_[n]||(_[n]=new pe(e));break;case"cross-hatch":_[n]||(_[n]=new de(e));break;case"dots":_[n]||(_[n]=new ge(e));break;case"dashed":_[n]||(_[n]=new ye(e));break;case"zigzag-line":_[n]||(_[n]=new me(e));break;default:n="hachure",_[n]||(_[n]=new bt(e))}return _[n]})(t,ke).fillPolygons(o,t)}function It(o){const t=Object.assign({},o);return t.randomizer=void 0,o.seed&&(t.seed=o.seed+1),t}function jt(o){return o.randomizer||(o.randomizer=new Me(o.seed||0)),o.randomizer.next()}function nt(o,t,s,e=1){return s.roughness*e*(jt(s)*(t-o)+o)}function v(o,t,s=1){return nt(-o,o,t,s)}function H(o,t,s,e,n,a=!1){const i=a?n.disableMultiStrokeFill:n.disableMultiStroke,r=vt(o,t,s,e,n,!0,!1);if(i)return r;const l=vt(o,t,s,e,n,!0,!0);return r.concat(l)}function vt(o,t,s,e,n,a,i){const r=Math.pow(o-s,2)+Math.pow(t-e,2),l=Math.sqrt(r);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=n.maxRandomnessOffset||0;h*h*100>r&&(h=l/10);const p=h/2,u=.2+.2*jt(n);let f=n.bowing*n.maxRandomnessOffset*(e-t)/200,d=n.bowing*n.maxRandomnessOffset*(o-s)/200;f=v(f,n,c),d=v(d,n,c);const g=[],y=()=>v(p,n,c),m=()=>v(h,n,c),M=n.preserveVertices;return i?g.push({op:"move",data:[o+(M?0:y()),t+(M?0:y())]}):g.push({op:"move",data:[o+(M?0:v(h,n,c)),t+(M?0:v(h,n,c))]}),i?g.push({op:"bcurveTo",data:[f+o+(s-o)*u+y(),d+t+(e-t)*u+y(),f+o+2*(s-o)*u+y(),d+t+2*(e-t)*u+y(),s+(M?0:y()),e+(M?0:y())]}):g.push({op:"bcurveTo",data:[f+o+(s-o)*u+m(),d+t+(e-t)*u+m(),f+o+2*(s-o)*u+m(),d+t+2*(e-t)*u+m(),s+(M?0:m()),e+(M?0:m())]}),g}function X(o,t,s){if(!o.length)return[];const e=[];e.push([o[0][0]+v(t,s),o[0][1]+v(t,s)]),e.push([o[0][0]+v(t,s),o[0][1]+v(t,s)]);for(let n=1;n<o.length;n++)e.push([o[n][0]+v(t,s),o[n][1]+v(t,s)]),n===o.length-1&&e.push([o[n][0]+v(t,s),o[n][1]+v(t,s)]);return ot(e,null,s)}function ot(o,t,s){const e=o.length,n=[];if(e>3){const a=[],i=1-s.curveTightness;n.push({op:"move",data:[o[1][0],o[1][1]]});for(let r=1;r+2<e;r++){const l=o[r];a[0]=[l[0],l[1]],a[1]=[l[0]+(i*o[r+1][0]-i*o[r-1][0])/6,l[1]+(i*o[r+1][1]-i*o[r-1][1])/6],a[2]=[o[r+1][0]+(i*o[r][0]-i*o[r+2][0])/6,o[r+1][1]+(i*o[r][1]-i*o[r+2][1])/6],a[3]=[o[r+1][0],o[r+1][1]],n.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}}else e===3?(n.push({op:"move",data:[o[1][0],o[1][1]]}),n.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[2][0],o[2][1]]})):e===2&&n.push(...vt(o[0][0],o[0][1],o[1][0],o[1][1],s,!0,!0));return n}function _t(o,t,s,e,n,a,i,r){const l=[],c=[];if(r.roughness===0){o/=4,c.push([t+e*Math.cos(-o),s+n*Math.sin(-o)]);for(let h=0;h<=2*Math.PI;h+=o){const p=[t+e*Math.cos(h),s+n*Math.sin(h)];l.push(p),c.push(p)}c.push([t+e*Math.cos(0),s+n*Math.sin(0)]),c.push([t+e*Math.cos(o),s+n*Math.sin(o)])}else{const h=v(.5,r)-Math.PI/2;c.push([v(a,r)+t+.9*e*Math.cos(h-o),v(a,r)+s+.9*n*Math.sin(h-o)]);const p=2*Math.PI+h-.01;for(let u=h;u<p;u+=o){const f=[v(a,r)+t+e*Math.cos(u),v(a,r)+s+n*Math.sin(u)];l.push(f),c.push(f)}c.push([v(a,r)+t+e*Math.cos(h+2*Math.PI+.5*i),v(a,r)+s+n*Math.sin(h+2*Math.PI+.5*i)]),c.push([v(a,r)+t+.98*e*Math.cos(h+i),v(a,r)+s+.98*n*Math.sin(h+i)]),c.push([v(a,r)+t+.9*e*Math.cos(h+.5*i),v(a,r)+s+.9*n*Math.sin(h+.5*i)])}return[c,l]}function Et(o,t,s,e,n,a,i,r,l){const c=a+v(.1,l),h=[];h.push([v(r,l)+t+.9*e*Math.cos(c-o),v(r,l)+s+.9*n*Math.sin(c-o)]);for(let p=c;p<=i;p+=o)h.push([v(r,l)+t+e*Math.cos(p),v(r,l)+s+n*Math.sin(p)]);return h.push([t+e*Math.cos(i),s+n*Math.sin(i)]),h.push([t+e*Math.cos(i),s+n*Math.sin(i)]),ot(h,null,l)}function xe(o,t,s,e,n,a,i,r){const l=[],c=[r.maxRandomnessOffset||1,(r.maxRandomnessOffset||1)+.3];let h=[0,0];const p=r.disableMultiStroke?1:2,u=r.preserveVertices;for(let f=0;f<p;f++)f===0?l.push({op:"move",data:[i[0],i[1]]}):l.push({op:"move",data:[i[0]+(u?0:v(c[0],r)),i[1]+(u?0:v(c[0],r))]}),h=u?[n,a]:[n+v(c[f],r),a+v(c[f],r)],l.push({op:"bcurveTo",data:[o+v(c[f],r),t+v(c[f],r),s+v(c[f],r),e+v(c[f],r),h[0],h[1]]});return l}function Z(o){return[...o]}function qt(o,t=0){const s=o.length;if(s<3)throw new Error("A curve must have at least three points.");const e=[];if(s===3)e.push(Z(o[0]),Z(o[1]),Z(o[2]),Z(o[2]));else{const n=[];n.push(o[0],o[0]);for(let r=1;r<o.length;r++)n.push(o[r]),r===o.length-1&&n.push(o[r]);const a=[],i=1-t;e.push(Z(n[0]));for(let r=1;r+2<n.length;r++){const l=n[r];a[0]=[l[0],l[1]],a[1]=[l[0]+(i*n[r+1][0]-i*n[r-1][0])/6,l[1]+(i*n[r+1][1]-i*n[r-1][1])/6],a[2]=[n[r+1][0]+(i*n[r][0]-i*n[r+2][0])/6,n[r+1][1]+(i*n[r][1]-i*n[r+2][1])/6],a[3]=[n[r+1][0],n[r+1][1]],e.push(a[1],a[2],a[3])}}return e}function et(o,t){return Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2)}function we(o,t,s){const e=et(t,s);if(e===0)return et(o,t);let n=((o[0]-t[0])*(s[0]-t[0])+(o[1]-t[1])*(s[1]-t[1]))/e;return n=Math.max(0,Math.min(1,n)),et(o,G(t,s,n))}function G(o,t,s){return[o[0]+(t[0]-o[0])*s,o[1]+(t[1]-o[1])*s]}function kt(o,t,s,e){const n=e||[];if((function(r,l){const c=r[l+0],h=r[l+1],p=r[l+2],u=r[l+3];let f=3*h[0]-2*c[0]-u[0];f*=f;let d=3*h[1]-2*c[1]-u[1];d*=d;let g=3*p[0]-2*u[0]-c[0];g*=g;let y=3*p[1]-2*u[1]-c[1];return y*=y,f<g&&(f=g),d<y&&(d=y),f+d})(o,t)<s){const r=o[t+0];n.length?(a=n[n.length-1],i=r,Math.sqrt(et(a,i))>1&&n.push(r)):n.push(r),n.push(o[t+3])}else{const l=o[t+0],c=o[t+1],h=o[t+2],p=o[t+3],u=G(l,c,.5),f=G(c,h,.5),d=G(h,p,.5),g=G(u,f,.5),y=G(f,d,.5),m=G(g,y,.5);kt([l,u,g,m],0,s,n),kt([m,y,d,p],0,s,n)}var a,i;return n}function Pe(o,t){return at(o,0,o.length,t)}function at(o,t,s,e,n){const a=n||[],i=o[t],r=o[s-1];let l=0,c=1;for(let h=t+1;h<s-1;++h){const p=we(o[h],i,r);p>l&&(l=p,c=h)}return Math.sqrt(l)>e?(at(o,t,c+1,e,a),at(o,c,s,e,a)):(a.length||a.push(i),a.push(r)),a}function gt(o,t=.15,s){const e=[],n=(o.length-1)/3;for(let a=0;a<n;a++)kt(o,3*a,t,e);return s&&s>0?at(e,0,e.length,s):e}const E="none";class rt{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,s,e){return{shape:t,sets:s||[],options:e||this.defaultOptions}}line(t,s,e,n,a){const i=this._o(a);return this._d("line",[Ft(t,s,e,n,i)],i)}rectangle(t,s,e,n,a){const i=this._o(a),r=[],l=be(t,s,e,n,i);if(i.fill){const c=[[t,s],[t+e,s],[t+e,s+n],[t,s+n]];i.fillStyle==="solid"?r.push(dt([c],i)):r.push(F([c],i))}return i.stroke!==E&&r.push(l),this._d("rectangle",r,i)}ellipse(t,s,e,n,a){const i=this._o(a),r=[],l=Bt(e,n,i),c=Mt(t,s,i,l);if(i.fill)if(i.fillStyle==="solid"){const h=Mt(t,s,i,l).opset;h.type="fillPath",r.push(h)}else r.push(F([c.estimatedPoints],i));return i.stroke!==E&&r.push(c.opset),this._d("ellipse",r,i)}circle(t,s,e,n){const a=this.ellipse(t,s,e,e,n);return a.shape="circle",a}linearPath(t,s){const e=this._o(s);return this._d("linearPath",[tt(t,!1,e)],e)}arc(t,s,e,n,a,i,r=!1,l){const c=this._o(l),h=[],p=$t(t,s,e,n,a,i,r,!0,c);if(r&&c.fill)if(c.fillStyle==="solid"){const u=Object.assign({},c);u.disableMultiStroke=!0;const f=$t(t,s,e,n,a,i,!0,!1,u);f.type="fillPath",h.push(f)}else h.push((function(u,f,d,g,y,m,M){const b=u,k=f;let x=Math.abs(d/2),w=Math.abs(g/2);x+=v(.01*x,M),w+=v(.01*w,M);let L=y,$=m;for(;L<0;)L+=2*Math.PI,$+=2*Math.PI;$-L>2*Math.PI&&(L=0,$=2*Math.PI);const q=($-L)/M.curveStepCount,A=[];for(let I=L;I<=$;I+=q)A.push([b+x*Math.cos(I),k+w*Math.sin(I)]);return A.push([b+x*Math.cos($),k+w*Math.sin($)]),A.push([b,k]),F([A],M)})(t,s,e,n,a,i,c));return c.stroke!==E&&h.push(p),this._d("arc",h,c)}curve(t,s){const e=this._o(s),n=[],a=Tt(t,e);if(e.fill&&e.fill!==E)if(e.fillStyle==="solid"){const i=Tt(t,Object.assign(Object.assign({},e),{disableMultiStroke:!0,roughness:e.roughness?e.roughness+e.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(i.ops)})}else{const i=[],r=t;if(r.length){const l=typeof r[0][0]=="number"?[r]:r;for(const c of l)c.length<3?i.push(...c):c.length===3?i.push(...gt(qt([c[0],c[0],c[1],c[2]]),10,(1+e.roughness)/2)):i.push(...gt(qt(c),10,(1+e.roughness)/2))}i.length&&n.push(F([i],e))}return e.stroke!==E&&n.push(a),this._d("curve",n,e)}polygon(t,s){const e=this._o(s),n=[],a=tt(t,!0,e);return e.fill&&(e.fillStyle==="solid"?n.push(dt([t],e)):n.push(F([t],e))),e.stroke!==E&&n.push(a),this._d("polygon",n,e)}path(t,s){const e=this._o(s),n=[];if(!t)return this._d("path",n,e);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=e.fill&&e.fill!=="transparent"&&e.fill!==E,i=e.stroke!==E,r=!!(e.simplification&&e.simplification<1),l=(function(h,p,u){const f=Ht(Rt(xt(h))),d=[];let g=[],y=[0,0],m=[];const M=()=>{m.length>=4&&g.push(...gt(m,p)),m=[]},b=()=>{M(),g.length&&(d.push(g),g=[])};for(const{key:x,data:w}of f)switch(x){case"M":b(),y=[w[0],w[1]],g.push(y);break;case"L":M(),g.push([w[0],w[1]]);break;case"C":if(!m.length){const L=g.length?g[g.length-1]:y;m.push([L[0],L[1]])}m.push([w[0],w[1]]),m.push([w[2],w[3]]),m.push([w[4],w[5]]);break;case"Z":M(),g.push([y[0],y[1]])}if(b(),!u)return d;const k=[];for(const x of d){const w=Pe(x,u);w.length&&k.push(w)}return k})(t,1,r?4-4*(e.simplification||1):(1+e.roughness)/2),c=Ct(t,e);if(a)if(e.fillStyle==="solid")if(l.length===1){const h=Ct(t,Object.assign(Object.assign({},e),{disableMultiStroke:!0,roughness:e.roughness?e.roughness+e.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else n.push(dt(l,e));else n.push(F(l,e));return i&&(r?l.forEach((h=>{n.push(tt(h,!1,e))})):n.push(c)),this._d("path",n,e)}opsToPath(t,s){let e="";for(const n of t.ops){const a=typeof s=="number"&&s>=0?n.data.map((i=>+i.toFixed(s))):n.data;switch(n.op){case"move":e+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":e+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":e+=`L${a[0]} ${a[1]} `}}return e.trim()}toPaths(t){const s=t.sets||[],e=t.options||this.defaultOptions,n=[];for(const a of s){let i=null;switch(a.type){case"path":i={d:this.opsToPath(a),stroke:e.stroke,strokeWidth:e.strokeWidth,fill:E};break;case"fillPath":i={d:this.opsToPath(a),stroke:E,strokeWidth:0,fill:e.fill||E};break;case"fillSketch":i=this.fillSketch(a,e)}i&&n.push(i)}return n}fillSketch(t,s){let e=s.fillWeight;return e<0&&(e=s.strokeWidth/2),{d:this.opsToPath(t),stroke:s.fill||E,strokeWidth:e,fill:E}}_mergedShape(t){return t.filter(((s,e)=>e===0||s.op!=="move"))}}class Se{constructor(t,s){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new rt(s)}draw(t){const s=t.sets||[],e=t.options||this.getDefaultOptions(),n=this.ctx,a=t.options.fixedDecimalPlaceDigits;for(const i of s)switch(i.type){case"path":n.save(),n.strokeStyle=e.stroke==="none"?"transparent":e.stroke,n.lineWidth=e.strokeWidth,e.strokeLineDash&&n.setLineDash(e.strokeLineDash),e.strokeLineDashOffset&&(n.lineDashOffset=e.strokeLineDashOffset),this._drawToContext(n,i,a),n.restore();break;case"fillPath":{n.save(),n.fillStyle=e.fill||"";const r=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(n,i,a,r),n.restore();break}case"fillSketch":this.fillSketch(n,i,e)}}fillSketch(t,s,e){let n=e.fillWeight;n<0&&(n=e.strokeWidth/2),t.save(),e.fillLineDash&&t.setLineDash(e.fillLineDash),e.fillLineDashOffset&&(t.lineDashOffset=e.fillLineDashOffset),t.strokeStyle=e.fill||"",t.lineWidth=n,this._drawToContext(t,s,e.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,s,e,n="nonzero"){t.beginPath();for(const a of s.ops){const i=typeof e=="number"&&e>=0?a.data.map((r=>+r.toFixed(e))):a.data;switch(a.op){case"move":t.moveTo(i[0],i[1]);break;case"bcurveTo":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"lineTo":t.lineTo(i[0],i[1])}}s.type==="fillPath"?t.fill(n):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,s,e,n,a){const i=this.gen.line(t,s,e,n,a);return this.draw(i),i}rectangle(t,s,e,n,a){const i=this.gen.rectangle(t,s,e,n,a);return this.draw(i),i}ellipse(t,s,e,n,a){const i=this.gen.ellipse(t,s,e,n,a);return this.draw(i),i}circle(t,s,e,n){const a=this.gen.circle(t,s,e,n);return this.draw(a),a}linearPath(t,s){const e=this.gen.linearPath(t,s);return this.draw(e),e}polygon(t,s){const e=this.gen.polygon(t,s);return this.draw(e),e}arc(t,s,e,n,a,i,r=!1,l){const c=this.gen.arc(t,s,e,n,a,i,r,l);return this.draw(c),c}curve(t,s){const e=this.gen.curve(t,s);return this.draw(e),e}path(t,s){const e=this.gen.path(t,s);return this.draw(e),e}}const Y="http://www.w3.org/2000/svg";class Ae{constructor(t,s){this.svg=t,this.gen=new rt(s)}draw(t){const s=t.sets||[],e=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,a=n.createElementNS(Y,"g"),i=t.options.fixedDecimalPlaceDigits;for(const r of s){let l=null;switch(r.type){case"path":l=n.createElementNS(Y,"path"),l.setAttribute("d",this.opsToPath(r,i)),l.setAttribute("stroke",e.stroke),l.setAttribute("stroke-width",e.strokeWidth+""),l.setAttribute("fill","none"),e.strokeLineDash&&l.setAttribute("stroke-dasharray",e.strokeLineDash.join(" ").trim()),e.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${e.strokeLineDashOffset}`);break;case"fillPath":l=n.createElementNS(Y,"path"),l.setAttribute("d",this.opsToPath(r,i)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",e.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(n,r,e)}l&&a.appendChild(l)}return a}fillSketch(t,s,e){let n=e.fillWeight;n<0&&(n=e.strokeWidth/2);const a=t.createElementNS(Y,"path");return a.setAttribute("d",this.opsToPath(s,e.fixedDecimalPlaceDigits)),a.setAttribute("stroke",e.fill||""),a.setAttribute("stroke-width",n+""),a.setAttribute("fill","none"),e.fillLineDash&&a.setAttribute("stroke-dasharray",e.fillLineDash.join(" ").trim()),e.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${e.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,s){return this.gen.opsToPath(t,s)}line(t,s,e,n,a){const i=this.gen.line(t,s,e,n,a);return this.draw(i)}rectangle(t,s,e,n,a){const i=this.gen.rectangle(t,s,e,n,a);return this.draw(i)}ellipse(t,s,e,n,a){const i=this.gen.ellipse(t,s,e,n,a);return this.draw(i)}circle(t,s,e,n){const a=this.gen.circle(t,s,e,n);return this.draw(a)}linearPath(t,s){const e=this.gen.linearPath(t,s);return this.draw(e)}polygon(t,s){const e=this.gen.polygon(t,s);return this.draw(e)}arc(t,s,e,n,a,i,r=!1,l){const c=this.gen.arc(t,s,e,n,a,i,r,l);return this.draw(c)}curve(t,s){const e=this.gen.curve(t,s);return this.draw(e)}path(t,s){const e=this.gen.path(t,s);return this.draw(e)}}var Oe={canvas:(o,t)=>new Se(o,t),svg:(o,t)=>new Ae(o,t),generator:o=>new rt(o),newSeed:()=>rt.newSeed()};function Le(o){return o.split(/(?=M(?![a-z]))/).map(s=>s.trim()).filter(s=>s!=="")}function De(o){const t=o.getAttribute("d");return t?Le(t).map(s=>{const e=o.cloneNode();return e.setAttribute("d",s),e}):[]}const Vt=800,zt=(o,t,s,e)=>{const n=Math.PI/6,a=-t*Math.cos(n),i=t*Math.sin(n),r=-t*Math.cos(n),l=t*Math.sin(-n),c=document.createElementNS("http://www.w3.org/2000/svg","g");function h(p){for(const u of Array.from(p.children))c.appendChild(u)}if(s==="line")h(o.line(a,i,0,0,e)),h(o.line(r,l,0,0,e));else if(s==="polygon")h(o.polygon([[a,i],[0,0],[r,l]],e));else throw new Error("Invalid arrow head type");return c};function Te(o){const{point1:t,point2:s,width:e,headType:n,headSize:a,roughness:i,seed:r,twoWay:l,centerPositionParam:c,animation:h,strokeAnimationClass:p,fillAnimationClass:u}=o,f={...i!==void 0&&{roughness:i},...r!==void 0&&{seed:r}},d=Oe.svg(document.createElementNS("http://www.w3.org/2000/svg","svg")),g=R(()=>{if(!t.value||!s.value)return null;const k=t.value,x=s.value;if(k.x===x.x&&k.y===x.y)return;const w={...f,stroke:"currentColor",strokeWidth:e};if(c===0){const Qt=d.line(k.x,k.y,x.x,x.y,w),Pt=Math.atan2(x.y-k.y,x.x-k.x)-Math.PI/2;return{svgPath:Qt.getElementsByTagName("path")[0],angle1:Pt,angle2:Pt,lineLength:Math.hypot(x.x-k.x,x.y-k.y),arcMid:{x:(k.x+x.x)/2,y:(k.y+x.y)/2}}}const L={x:(k.x+x.x)/2,y:(k.y+x.y)/2},$=x.x-k.x,q=x.y-k.y,A=Math.hypot($,q),I={x:-q/A,y:$/A},W=(1-Math.pow(c,2))*A/(4*c),D={x:L.x+W*I.x,y:L.y+W*I.y},S=Math.sqrt((A/2)**2+W**2),P=Math.atan2(k.y-D.y,k.x-D.x),T=Math.atan2(x.y-D.y,x.x-D.x);let C,O;c>0?(C=P,O=T):(C=T,O=P),O<C&&(O+=2*Math.PI);const z=c<-1||1<c?1:0,N=c>0?1:0,U=d.path(`M${k.x} ${k.y} A${S} ${S} 0 ${z} ${N} ${x.x} ${x.y}`,w),wt=S*Math.sign(W),Zt={x:D.x-wt*I.x,y:D.y-wt*I.y};return{svgPath:U.getElementsByTagName("path")[0],angle1:P,angle2:T,lineLength:S*(O-C),arcMid:Zt}});function y(){return g.value==null?0:a??30*Math.log(g.value.lineLength)/Math.log(200)}const m=R(()=>{if(g.value==null||t.value==null||s.value==null)return null;const k=y(),x={...f,stroke:"currentColor",strokeWidth:e,fill:"currentColor",fillStyle:"solid"},w=zt(d,k,n,x);if(w.setAttribute("transform",`translate(${s.value.x},${s.value.y}) rotate(${g.value.angle2*180/Math.PI+(c>=0?90:-90)})`),!l)return{arrowHeadForwardSvg:w,arrowHeadBackwardSvg:null,lineLength:k};const L=zt(d,k,n,x);return L.setAttribute("transform",`translate(${t.value.x},${t.value.y}) rotate(${g.value.angle1*180/Math.PI+(c>=0?-90:90)})`),{arrowHeadBackwardSvg:L,arrowHeadForwardSvg:w,lineLength:k}}),M=R(()=>{const k=document.createElementNS("http://www.w3.org/2000/svg","g");if(g.value==null||m.value==null)return null;const x=g.value.svgPath,w=m.value.arrowHeadBackwardSvg,L=m.value.arrowHeadForwardSvg,$=De(x);if($.forEach(q=>k.appendChild(q)),k.appendChild(L),w&&k.appendChild(w),h){let q=function(P,T){const C=[],O=[];return P.childNodes.forEach(z=>{if(z instanceof SVGPathElement){const N=z.getAttribute("stroke"),U=z.getAttribute("fill");N&&N!=="none"?C.push(z):U&&U!=="none"&&O.push(z)}}),{strokedPaths:C,filledPaths:O,length:T}};const A=[];A.push({length:g.value.lineLength,strokedPaths:$,filledPaths:[]}),A.push(q(L,m.value.lineLength*2)),w&&A.push(q(w,m.value.lineLength*2));const I=A.map(P=>P.length).reduce((P,T)=>P+T,0),{duration:W=Vt,delay:D=0}=h;let S=D;for(const P of A){const T=P.length/I*W,C=T/P.strokedPaths.length;P.strokedPaths.forEach((O,z)=>{const N=S+z/P.strokedPaths.length*T;O.classList.add(p),O.style.animationDuration=`${C}ms`,O.style.animationDelay=`${N}ms`,O.style.strokeDashoffset=`${P.length}`,O.style.strokeDasharray=`${P.length}`,O.style.visibility="hidden"}),S+=T,P.filledPaths.forEach(O=>{O.classList.add(u),O.style.animationDuration=`${T}ms`,O.style.animationDelay=`${S}ms`,O.style.visibility="hidden"})}}return k.innerHTML}),b=R(()=>g.value==null?null:g.value.arcMid);return{arrowSvg:M,textPosition:b}}const $e=["innerHTML"],_e=Kt({__name:"FancyArrow",props:{from:{},to:{},q1:{},q2:{},id1:{},id2:{},pos1:{},pos2:{},x1:{},y1:{},x2:{},y2:{},width:{},color:{},twoWay:{type:Boolean},arc:{},headType:{},headSize:{},roughness:{},seed:{},static:{type:Boolean},animationDuration:{},animationDelay:{}},setup(o){Wt();const t=o,s=yt(),e=R(()=>s.value?.closest(".slidev-page")??void 0),n=yt(),a=R(()=>Ot({shorthand:t.from,q:t.q1,id:t.id1,pos:t.pos1,x:t.x1,y:t.y1})),i=R(()=>Ot({shorthand:t.to,q:t.q2,id:t.id2,pos:t.pos2,x:t.x2,y:t.y2})),r=Lt(e,n,a,{self:s,direction:"prev"}),l=Lt(e,n,i,{self:s,direction:"next"}),c=R(()=>t.static!==!0),{arrowSvg:h,textPosition:p}=Te({point1:r,point2:l,width:Number(t.width??2),twoWay:t.twoWay??!1,centerPositionParam:Number(t.arc??0),headType:t.headType??"line",headSize:t.headSize?Number(t.headSize):null,roughness:t.roughness?Number(t.roughness):void 0,seed:t.seed?Number(t.seed):void 0,animation:c.value?{duration:t.animationDuration!=null?Number(t.animationDuration):void 0,delay:t.animationDelay!=null?Number(t.animationDelay):void 0}:void 0,strokeAnimationClass:"animated-rough-arrow-stroke",fillAnimationClass:"animated-rough-arrow-fill"});return(u,f)=>(ct(),ht("div",{ref_key:"root",ref:s,style:{position:"absolute",top:"0",left:"0"}},[(ct(),ht("svg",{ref_key:"svgContainer",ref:n,class:At(t.color?`text-${t.color}`:""),style:{position:"absolute",top:"0",left:"0",width:"1px",height:"1px",overflow:"visible"}},[St(" eslint-disable-next-line vue/no-v-html "),Xt("g",{innerHTML:j(h)},null,8,$e)],2)),u.$slots.default&&j(p)?(ct(),ht("div",{key:0,class:At({"animated-rough-arrow-content":c.value}),style:Yt({position:"absolute",left:`${j(p).x}px`,top:`${j(p).y}px`,transform:"translate(-50%, -50%)",...c.value&&{animationDuration:`${t.animationDuration??j(Vt)}ms`,animationDelay:`${t.animationDelay??0}ms`,visibility:"hidden"}})},[te(u.$slots,"default")],6)):St("v-if",!0)],512))}});export{_e as _};
